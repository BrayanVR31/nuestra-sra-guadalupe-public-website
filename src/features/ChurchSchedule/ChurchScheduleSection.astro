---
import ScheduleCard from "./components/ScheduleCard.astro";
import Timeline from "./components/Timeline.astro";
import ScheduleLayout from "./layouts/ScheduleLayout.astro";
import { churchSchedules } from "./data/schedules";
---

<section
  class="py-24 min-h-svh"
  id="church-schedule"
  aria-labelledby="schedule-title"
>
  <div
    class="mb-10 md:w-max mx-auto relative after:content-[''] after:absolute after:w-10/12 after:h-0.5 after:bg-ordinario after:left-1/2 after:-translate-x-1/2 after:-bottom-4"
  >
    <h2
      class="text-center font-extrabold text-2xl md:text-4xl uppercase text-neutral-800 mb-2"
      id="horarios-title"
    >
      HORARIOS DE MISA
    </h2>
    <h3 class="text-center text-lg text-balance text-neutral-800 font-semibold">
      Celebraciones semanales
    </h3>
  </div>
  <p
    class="md:max-w-lg mx-auto text-center text-base/loose text-neutral-700 mb-14"
  >
    Encuentra el horario de misas y celebraciones litúrgicas de nuestra
    parroquia. Acompáñanos en cada momento de fe y oración.
  </p>
  <div
    class="bg-white px-6 py-10 grid max-md:grid-cols-1 grid-cols-(--schedule-cols) place-content-around gap-16 flex-1"
  >
    {
      churchSchedules.map((schedule) => {
        if (!schedule.isMulti) {
          const { scheduleCard, timelineDetails, timelineTitle } = schedule;
          return (
            <ScheduleLayout title={timelineTitle}>
              <ScheduleCard {...scheduleCard} slot={scheduleCard.slot} />
              <Timeline {...timelineDetails} slot={timelineDetails.slot} />
            </ScheduleLayout>
          );
        }
        return (
          <div class="flex flex-col gap-4">
            {schedule.items.map(
              ({ timelineTitle, scheduleCard, timelineDetails }) => (
                <ScheduleLayout title={timelineTitle}>
                  <ScheduleCard {...scheduleCard} slot={scheduleCard.slot} />
                  <Timeline {...timelineDetails} slot={timelineDetails.slot} />
                </ScheduleLayout>
              ),
            )}
          </div>
        );
      })
    }
  </div>
</section>
