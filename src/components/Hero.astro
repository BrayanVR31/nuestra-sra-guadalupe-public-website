---
import { Picture } from "astro:assets";
import type { ImageMetadata } from "astro";

interface Props {
  title: string;
  description: string;
  image: ImageMetadata;
}
const { title, description, image } = Astro.props;
---

<section
  id="hero-section"
  class="relative h-hero-y flex justify-center items-center"
  style="clip-path: polygon(0% 0, 100% 0%, 100% 100%, 0 100%)"
>
  <!-- Parallax Effect -->
  <div class="fixed top-[-10vh] left-0 h-[120vh] w-full">
    <div id="hero-bg" class="relative w-full h-full">
      <Picture
        widths={[640, 1024, 1920]}
        sizes="100vw"
        src={image}
        alt=""
        formats={["avif", "webp"]}
        class="absolute inset-0 w-full h-full object-cover object-center"
      />
    </div>
  </div>

  <!-- Overlay -->
  <div
    class="absolute inset-0 bg-linear-to-b from-black/80 via-black/30 to-transparent backdrop-blur-xs z-10"
  >
  </div>

  <!-- Content -->
  <div class="text-center text-white z-20 px-4">
    <h1
      class="text-3xl/12 md:text-6xl lg:text-7xl font-extrabold tracking-tight"
      id="hero-section"
      aria-labelledby="hero-title"
    >
      {title}
    </h1>
    <p class="text-base/7 md:text-xl mt-4 md:mt-6">{description}</p>
  </div>

  <!-- Scroll button -->
  <a
    href="#main-content"
    class="absolute bottom-10 left-1/2 -translate-x-1/2 z-20 animate-bounce"
    aria-label="Ir al contenido principal"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="40"
      height="40"
      viewBox="0 0 24 24"
      fill="none"
      stroke="white"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    >
      <path d="M7 13l5 5 5-5M7 6l5 5 5-5"></path>
    </svg>
  </a>
</section>

<script>
  import { animate, scroll } from "motion";

  const section = document.querySelector("#hero-section");
  const bg = document.querySelector("#hero-bg");

  if (section && bg) {
    scroll(animate(bg, { y: ["-10vh", "10vh"] }), {
      target: section,
      offset: ["start end", "end start"],
    });
  }
</script>
